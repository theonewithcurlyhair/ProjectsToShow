(this["webpackJsonpleads-manager"]=this["webpackJsonpleads-manager"]||[]).push([[0],{159:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a(0),i=a.n(c),r=a(11),o=a.n(r),s=a(8),l=a(20),d=a(215),u=a(211),j=a(195),b=a(198),m=a(200),O=a(77),f=a(201),h=Object(j.a)((function(e){return{grow:{flexGrow:1,margin:e.spacing(0)},appBar:{zIndex:200},Toolbar:{zIndex:200},AppBarButtons:{textTransform:"none"},title:Object(l.a)({fontSize:15,textTransform:"none"},e.breakpoints.up("sm"),{display:"block"})}}));var x=function(e){var t=h();return Object(n.jsx)("div",{className:t.grow,children:Object(n.jsx)(b.a,{position:"fixed",className:t.appBar,children:Object(n.jsxs)(m.a,{variant:"dense",className:t.Toolbar,children:[Object(n.jsx)(O.a,{variant:"h4",noWrap:!0,children:Object(n.jsx)(f.a,{color:"inherit",variant:"text",className:t.title,children:"Leads Management"})}),Object(n.jsx)("div",{className:t.grow})]})})})};function g(){return Object(n.jsx)("header",{children:Object(n.jsx)(x,{})})}var p=a(16),v=a(202),C=a(212),w=a(205),_=a(204),E=a(101),y=a.n(E),D=a(47),L=a.n(D),N=a(63),k=a(216),T=a(218),F=a(203),S=a(99),A=a.n(S),B=a(65),R=a.n(B),M=a(98),P=a.n(M),U=a(66),I=a.n(U),G=a(32),H=a.n(G),q=a(18),z=a(22),W=a.n(z),V="FETCH_LEAD",J="FETCH_LEAD_SUCCESS",X="FETCH_LEAD_FAILURE",Y="REFETCH_LEAD_SUCCESS",$="DELETE_LEAD",K="DELETE_LEAD_SUCCESS",Q="DELETE_LEAD_FAILURE",Z=a(38);function ee(e,t){return e.filter((function(e){return e.id!==t&&e}))}function te(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=[].concat(Object(Z.a)(e),Object(Z.a)(t));return a.sort((function(e,t){return e.date_updated&&t.date_updated?new Date(t.date_updated)-new Date(e.date_updated):e.date_created&&t.date_created?new Date(t.date_created)-new Date(e.date_created):e.date&&t.date?new Date(t.date)-new Date(e.date):e-t})),a}var ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(n.jsx)("ul",{children:e.map((function(e){return Object(n.jsx)("li",{children:e})}))})},ne=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:e,payload:t}},ce=function(e){return ne(J,e)},ie=function(e){return ne(X,e)};function re(){return function(e){e(ne(V)),H.a.get("/api/leads/").then((function(t){return 200!==t.status&&e(ie(t)),t})).then((function(t){e(ce(t.data))})).catch((function(t){console.log("error =>",t),e(ie(t)),e(Object(z.error)({title:t.response.data.message||t.request.statusText,message:"Failed to load Leadss"}))}))}}var oe=function(e){return function(t,a){if(e){var n=a().leads.leads;return n=te(n,[e]),void t(ce(n))}}},se=function(e){return ne("REFETCH_LEAD_FAILURE",e)},le=function(e){return function(t){t(ne("REFETCH_LEAD")),function(e){return H.a.get("/api/leads/".concat(e,"/"))}(e).then((function(e){return 200!==e.status&&t(se(e)),e})).then((function(e){var a;t((a=e.data,ne(Y,a)))})).catch((function(e){t(se(e)),t(Object(z.error)({title:e.response.data.message||e.request.statusText,message:"Failed to refetch lead"}))}))}},de=function(e){return ne(Q,e)},ue=function(e){return function(t){t(ne($)),function(e){return H.a.delete("/api/leads/".concat(e,"/"))}(e).then((function(e){return 200!==e.status&&t(de(e)),e})).then((function(a){var n,c;t((c={lead:null===(n=a.data)||void 0===n?void 0:n.lead,lead_id:e},ne(K,c)))})).catch((function(e){t(de(e)),t(Object(z.error)({title:e.response.data.message||e.request.statusText,message:"Failed to delete lead"}))}))}},je=Object(j.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"95% "}},shape:{width:30,height:30,margin:e.spacing(.5)},shapeCircle:{borderRadius:"25%"},colors:{margin:e.spacing(1),"& > *":{margin:e.spacing(1)}},card:{display:"flex",flexDirection:"column"}}}));var be=Object(q.connect)((function(e){return{}}),(function(e){return{refetchLead:function(t){return e(le(t))},addNotification:function(t,a){return e(a(t))}}}))((function(e){var t=Object(s.a)({},e),a=t.lead,i=t.handleToggleActions,r=t.addNotification,o=t.refetchLead,d=je(),u=Object(c.useState)({id:a.id,first_name:a.first_name,last_name:a.last_name,email:a.email,notes:a.notes,contacted:a.contacted}),j=Object(p.a)(u,2),b=j[0],m=j[1],O=Object(c.useState)(!1),f=Object(p.a)(O,2),h=f[0],x=f[1],g=function(){var e=Object(N.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),x(!0),e.prev=2,e.next=5,n=b,H.a.put("/api/leads/".concat(n.id,"/"),Object(s.a)({},n));case 5:o(a.id),i("toggleDisplay"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),r({title:e.t0.response.data.message||e.t0.request.statusText,message:"Failed to edit lead"},z.error);case 12:x(!1);case 13:case"end":return e.stop()}var n}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),C=function(e){var t=e.target,a=t.name,n=t.value;m((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(l.a)({},a,n))}))};return Object(n.jsxs)(v.a,{className:d.card,children:[Object(n.jsx)("form",{className:d.root,noValidate:!0,autoComplete:"off",children:Object(n.jsxs)("div",{children:[Object(n.jsx)(k.a,{id:"filled-multiline-static",label:"First name",name:"first_name",multiline:!0,rowsMax:2,value:b.first_name,onChange:C,variant:"filled"}),Object(n.jsx)(k.a,{id:"filled-multiline-static",label:"Last name",name:"last_name",multiline:!0,rowsMax:10,value:b.last_name,onChange:C,variant:"filled"}),Object(n.jsx)(k.a,{id:"filled-multiline-static",label:"Email",name:"email",multiline:!0,rowsMax:2,value:b.email,onChange:C,variant:"filled"}),Object(n.jsx)(k.a,{id:"filled-multiline-static",label:"Notes",name:"notes",multiline:!0,rowsMax:2,value:b.notes,onChange:C,variant:"filled"}),Object(n.jsx)(F.a,{control:Object(n.jsx)(T.a,{checked:!!b.contacted,onChange:function(e){m((function(t){return Object(s.a)(Object(s.a)({},t),{},Object(l.a)({},e.target.name,e.target.checked))}))},label:"Contacted",name:"contacted",inputProps:{"aria-label":"secondary checkbox"}}),label:b.contacted?"contacted":"not contacted",labelPlacement:"start"})]})}),Object(n.jsxs)(w.a,{children:[Object(n.jsx)(_.a,{onClick:function(){return i("toggleDisplay")},children:Object(n.jsx)(P.a,{})}),Object(n.jsx)(_.a,{children:Object(n.jsx)(A.a,{})}),Object(n.jsx)(_.a,{onClick:function(){return i("toggleEdit")},children:Object(n.jsx)(R.a,{})}),Object(n.jsx)(_.a,{onClick:g,disabled:h,children:Object(n.jsx)(I.a,{})})]})]})})),me=a(219),Oe=a(210),fe=a(208),he=a(209),xe=a(207);var ge=function(e){var t=Object(s.a)({},e),a=t.title,c=t.body,r=t.actionName,o=t.actionCallback,l=i.a.useState(!0),d=Object(p.a)(l,2),u=d[0],j=d[1],b=function(){return j(!1)};return Object(n.jsxs)(me.a,{open:u,onClose:b,disableBackdropClick:!0,children:[Object(n.jsx)(xe.a,{children:a}),Object(n.jsx)(fe.a,{children:Object(n.jsx)(he.a,{children:c})}),Object(n.jsxs)(Oe.a,{children:[Object(n.jsx)(f.a,{color:"secondary",onClick:b,variant:"contained",children:"Cancel"}),Object(n.jsx)(f.a,{color:"secondary",autoFocus:"autoFocus",onClick:function(){return o()},variant:"contained",children:r})]})]})},pe=a(100),ve=a.n(pe),Ce=a(76),we=Object(j.a)((function(e){return{icon:{margin:e.spacing(1,1,0,0),width:20,height:20},card:{display:"flex",flexDirection:"column"},cardContent:{flexGrow:1}}}));var _e=Object(q.connect)((function(e){return{leads:e.leads}}),(function(e){return{deleteLead:function(t){return e(ue(t))}}}))((function(e){var t=Object(s.a)({},e),a=t.lead,i=t.deleteLead,r=we(),o=Object(c.useState)(!1),l=Object(p.a)(o,2),d=l[0],j=l[1],b=Object(c.useState)(!1),m=Object(p.a)(b,2),f=m[0],h=m[1],x=Object(c.useState)(!1),g=Object(p.a)(x,2),E=g[0],y=g[1],D=function(e){"toggleEdit"===e&&(h(!f),d&&j(!1)),"toggleDisplay"===e&&(j(!d),f&&h(!1)),"toggleDelete"===e&&(y(!E),f&&h(!1))};return Object(n.jsxs)(u.a,{item:!0,xs:12,sm:6,md:4,children:[f?Object(n.jsx)(be,{lead:a,handleToggleActions:D}):Object(n.jsxs)(v.a,{className:r.card,children:[Object(n.jsxs)(C.a,{className:r.cardContent,children:[Object(n.jsx)(O.a,{gutterBottom:!0,variant:"h4",component:"h4",children:"".concat(a.first_name," ").concat(a.last_name)}),Object(n.jsx)(O.a,{gutterBottom:!0,variant:"h5",component:"h5",children:a.email}),Object(n.jsx)(O.a,{variant:"h6",component:"h6",gutterBottom:!0,children:a.notes?"Notes: "+a.notes:"Notes: No notes"}),Object(n.jsx)(O.a,{variant:"body2",component:"body2",gutterBottom:!0,children:a.contacted?"Contacted: Yes":"Contacted: No"}),Object(n.jsx)(O.a,{variant:"body2",component:"p",gutterBottom:!0,children:!!a.created_at&&" Created ".concat(Object(Ce.a)(new Date(Date.parse(a.created_at)))," ago")}),Object(n.jsx)(O.a,{variant:"body2",component:"p",gutterBottom:!0,children:!!a.updated_at&&" Updated ".concat(Object(Ce.a)(new Date(Date.parse(a.updated_at)))," ago")})]}),Object(n.jsxs)(w.a,{children:[Object(n.jsx)(_.a,{onClick:function(){return D("toggleDelete")},title:"Delete note",children:Object(n.jsx)(ve.a,{})}),Object(n.jsx)(_.a,{onClick:function(){return D("toggleEdit")},title:"Edit note",children:Object(n.jsx)(R.a,{})})]})]}),E&&Object(n.jsx)(ge,{actionCallback:function(){return i(a.id)},actionName:"Delete",title:"Delete lead",body:"Click delete to delete this lead"})]},a.id)})),Ee=a(206),ye=Object(j.a)((function(e){return{icon:{marginRight:e.spacing(2)},cardGrid:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},card:{height:"100%",display:"flex",flexDirection:"column"},cardContent:{flexGrow:1}}})),De=function(e){var t=Object(s.a)({},e),a=t.leads,c=t.loadLeads,r=t.label,o=ye();return Object(n.jsx)(i.a.Fragment,{children:a&&a.length>=1?Object(n.jsx)(i.a.Fragment,{children:Object(n.jsx)(u.a,{container:!0,className:o.cardGrid,spacing:2,children:a.map((function(e){return Object(n.jsx)(Ee.a,{in:!0,children:Object(n.jsx)(_e,{lead:e},e.id)})}))})}):Object(n.jsx)(i.a.Fragment,{children:Object(n.jsx)(u.a,{container:!0,className:o.cardGrid,spacing:4,children:Object(n.jsx)(u.a,{item:!0,xs:12,sm:6,md:4,children:Object(n.jsxs)(v.a,{className:o.card,children:[Object(n.jsx)(C.a,{className:o.cardContent,children:Object(n.jsx)(O.a,{gutterBottom:!0,variant:"h6",component:"h6",children:"No leads in ".concat(r)})}),Object(n.jsx)(w.a,{children:Object(n.jsx)(_.a,{onClick:c,title:"Refresh ".concat(r),className:o.icons,children:Object(n.jsx)(y.a,{})})})]})})})})})},Le=a(103),Ne=a.n(Le),ke=a(102),Te=a.n(ke),Fe=a(213),Se=Object(j.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"95% "}},shape:{width:30,height:30},shapeCircle:{borderRadius:"25%"},colors:{margin:e.spacing(1),"& > *":{margin:e.spacing(1)}},card:{display:"flex",flexDirection:"column"},cardColor:{color:e.palette.common.white}}}));var Ae=function(e){var t=Object(s.a)({},e).setDisplayAddLeadComponent,a=Object(q.useDispatch)(),i=Se(),r=Object(c.useState)({first_name:"",last_name:"",email:"",notes:"",contacted:!1}),o=Object(p.a)(r,2),d=o[0],u=o[1],j=Object(c.useState)(!1),b=Object(p.a)(j,2),m=b[0],O=b[1],f=function(){var e=Object(N.a)(L.a.mark((function e(n){var c,i,r;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),O(!0),e.prev=2,e.next=5,o=d,H.a.post("/api/leads/",Object(s.a)({},o));case 5:c=e.sent,t(!1),a(oe(c.data)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),a(Object(z.error)({title:e.t0.request.statusText,autoDismiss:0,message:"Failed to add lead",children:ae(null===(i=e.t0.response)||void 0===i||null===(r=i.data)||void 0===r?void 0:r.errors)}));case 13:O(!1);case 14:case"end":return e.stop()}var o}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),h=function(e){var t=e.target,a=t.name,n=t.value;u((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(l.a)({},a,n))}))};return Object(n.jsxs)(v.a,{className:i.card,children:[Object(n.jsx)("form",{className:i.root,noValidate:!0,children:Object(n.jsxs)("div",{children:[Object(n.jsx)(k.a,{id:"filled-multiline-static",label:"First name",name:"first_name",multiline:!0,rowsMax:2,value:d.firstName,onChange:h,variant:"filled"}),Object(n.jsx)(k.a,{id:"filled-multiline-static",label:"Last name",name:"last_name",multiline:!0,rowsMax:10,value:d.lastName,onChange:h,variant:"filled"}),Object(n.jsx)(k.a,{id:"filled-multiline-static",label:"Email",type:"email",name:"email",multiline:!0,rowsMax:2,value:d.email,onChange:h,variant:"filled"}),Object(n.jsx)(k.a,{id:"filled-multiline-static",label:"Notes",type:"text",name:"notes",multiline:!0,rowsMax:2,value:d.notes,onChange:h,variant:"filled"}),Object(n.jsx)(F.a,{control:Object(n.jsx)(T.a,{checked:!!d.contacted,onChange:function(e){u((function(t){return Object(s.a)(Object(s.a)({},t),{},Object(l.a)({},e.target.name,e.target.checked))}))},label:"Contacted",name:"contacted",inputProps:{"aria-label":"secondary checkbox"}}),label:d.contacted?"contacted":"not contacted",labelPlacement:"start"})]})}),Object(n.jsx)(w.a,{children:Object(n.jsx)(_.a,{onClick:f,disabled:m,children:Object(n.jsx)(I.a,{})})})]})},Be=Object(j.a)((function(e){return{card:{display:"flex",margin:e.spacing(1),boxShadow:"none !important"},cardDetails:{flex:1},cardMedia:{minWidth:160},a:{textDecoration:"none",color:e.palette.secondary.main},divider:{margin:e.spacing(1,0,2,0)}}})),Re=Object(q.connect)((function(e){return{leads:e.leads}}),(function(e){return{loadLeads:function(){return e(re())}}}))((function(e){var t=Object(s.a)({},e),a=t.leads,r=t.loadLeads,o=Be(),l=Object(c.useState)(!1),d=Object(p.a)(l,2),u=d[0],j=d[1];return Object(c.useEffect)((function(){a.leads.length||a.isLoading||a.isLoaded||a.isError||r()}),[a,r]),Object(n.jsxs)(i.a.Fragment,{children:[Object(n.jsx)(_.a,{onClick:function(){return j(!u)},children:Object(n.jsx)(Te.a,{})}),Object(n.jsx)(Fe.a,{className:o.divider}),u&&Object(n.jsxs)(i.a.Fragment,{children:[Object(n.jsx)(Ae,{setDisplayAddLeadComponent:j}),Object(n.jsx)(Fe.a,{className:o.divider})]}),Object(n.jsx)(_.a,{children:Object(n.jsx)(Ne.a,{})}),Object(n.jsx)(De,{leads:a.leads,loadLeads:r,label:"Recent"})]})})),Me=a(106),Pe=a(214),Ue=window.location.origin;H.a.defaults.baseURL=Ue;var Ie={defaultPaletteColors:{primary:{light:"#484848",main:"#212121",dark:"#000000"},secondary:{light:"#ffff6e",main:"#009688",dark:"#009692"}}},Ge=Object(j.a)((function(e){return{root:Object(l.a)({width:"auto",marginTop:e.spacing(10),marginLeft:e.spacing(3),marginRight:e.spacing(3)},e.breakpoints.up(1100+e.spacing(6)),{width:1100,marginLeft:"auto",marginRight:"auto"})}})),He={NotificationItem:{DefaultStyle:{margin:"5px 5px 2px 1px"}}};var qe=Object(q.connect)((function(e){return{notifications:e.notifications}}),(function(e){return{}}))((function(e){var t,a=Object(s.a)({},e).notifications;t="Leads Management App",window.document.title=t;var c=Ge(),i=Object(Me.a)({palette:{type:"light",primary:Ie.defaultPaletteColors.primary,secondary:Ie.defaultPaletteColors.secondary,contrastThreshold:3,tonalOffset:.2},typography:{fontSize:14}});return Object(n.jsxs)(Pe.a,{theme:i,children:[Object(n.jsx)(d.a,{}),Object(n.jsxs)(u.a,{component:"main",className:c.root,children:[Object(n.jsx)(g,{}),Object(n.jsx)(W.a,{notifications:a,style:He}),Object(n.jsx)(Re,{})]})]})})),ze=a(31),We=a(104),Ve=a(105),Je=a.n(Ve),Xe={leads:[],count:0,isLoading:!1,isLoaded:!1};var Ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:return Object(s.a)(Object(s.a)({},Xe),{},{isLoading:!0});case J:return Object(s.a)(Object(s.a)({},e),{},{leads:te(t.payload||e.leads),count:e.leads.length,isLoading:!1,isLoaded:!0});case X:return Object(s.a)(Object(s.a)({},e),{},{isLoading:!1,isLoaded:!0});case Y:var a;return Object(s.a)(Object(s.a)({},e),{},{leads:te(ee(e.leads,null===(a=t.payload)||void 0===a?void 0:a.id),[t.payload]),count:e.leads.length});case K:return Object(s.a)(Object(s.a)({},e),{},{leads:ee(e.leads,t.payload.lead_id),count:e.leads.length,isLoading:!1,isLoaded:!0});default:return e}},$e=Object(ze.c)({leads:Ye,notifications:z.reducer}),Ke=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ze.d,Qe=Object(ze.e)($e,Ke(Object(ze.a)(We.a,Je.a)));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ze=document.getElementById("root");o.a.render(Object(n.jsx)(q.Provider,{store:Qe,children:Object(n.jsx)(qe,{})}),Ze),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[159,1,2]]]);
//# sourceMappingURL=main.231a2769.chunk.js.map